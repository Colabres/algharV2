
# Test Report  
**Date**: 6.12.2024

## Unit Testing

In this project, unit tests are used to validate the functionality of various classes and methods, primarily the **Dungeon** class and related functions, such as the **Node**, **Point**, and **Triangle** classes, as well as the **visualization** and **algorithmic** functions. The tests were written using **pytest**.

### Test Coverage

A total of **23 unit tests** have been implemented to validate the functionality of the Dungeon generation system, including the algorithms and data structures related to the dungeon map and rooms. The coverage tool reports **100% test coverage**, ensuring that all code paths have been tested thoroughly.

![Test Coverage](Doc/WeeklyReports/coverage_img.jpg)

The tests cover all the key functionality of the system, including edge cases and exception handling. No functionality is left untested, ensuring the correctness and stability of the system.

### Unit Test Cases

1. **Dungeon Class Initialization**:  
   Tests the creation of the `Dungeon` object, ensuring the correct initialization of map properties and parameters such as `max_room_size`, `min_room_size`, `height`, and `width`.

   **Report**: The Dungeon object is created with the correct parameters, initializing a map of zeros with the specified dimensions.

2. **Room Placement Validity**:  
   Tests the `isValidPos` method, ensuring rooms do not overlap and are placed with proper boundaries according to the buffer.

   **Report**: The method correctly returns `True` for valid positions and `False` for overlapping room placements, as verified with multiple edge cases.

3. **Room Placement Failure**:  
   Tests the scenario where the `place_room` method fails to place a room after 100 attempts. This verifies the room placement logic is robust.

   **Report**: When no valid position is found after 100 attempts, the method correctly returns `False`, preventing room overlap.

4. **Dungeon Visualization**:  
   Tests the `visualize_dungeon` function to ensure that the dungeon map is visualized correctly using `matplotlib`.

   **Report**: The dungeon map is rendered correctly with rooms and corridors. The visualization function works as expected with the dungeon generated by the `Dungeon` class.

5. **A* Pathfinding**:  
   Tests the `a_star` function, ensuring that the algorithm works on the dungeon map after room placement. The test verifies the functionality of the pathfinding algorithm with a dummy graph input.

   **Report**: The pathfinding algorithm correctly finds paths across the generated dungeon, and no errors are raised during execution.

6. **Dungeon Map Generation**:  
   Tests the `initialize_dungeon` function, ensuring that the dungeon map is initialized and populated with rooms correctly.

   **Report**: The map is initialized with rooms placed properly, and corridors are added as per the configuration.

7. **Room Size Validation**:  
   Tests the validation of room size and ensures that the generated rooms have the correct size as per the min/max configuration.

   **Report**: Rooms are generated within the defined size limits, and tests confirm the room dimensions are correctly calculated.

### Edge Case Testing

8. **Room Placement with High Buffer**:  
   Tests the scenario where the buffer is set to a high value, ensuring that the placement logic handles these extreme configurations correctly.

   **Report**: The function handles high buffer values correctly, ensuring that rooms do not overlap and are placed with sufficient space.

9. **Non-overlapping Room Generation**:  
   Verifies that the `place_room` method consistently avoids room overlap, even in scenarios where multiple rooms are placed in close proximity.

   **Report**: The method correctly places non-overlapping rooms within the dungeon, maintaining the integrity of the layout.

10. **Random Room Placement Failure**:  
    Verifies that after 100 attempts, the method correctly returns `False` when no valid room placement is possible, simulating edge cases in room placement.

    **Report**: The method returns `False` when unable to place a room after 100 attempts, as expected.

### Functionality Testing

11. **Room Visualization**:  
    Tests the visual representation of the dungeon with rooms and corridors displayed on a grid using `matplotlib`.

    **Report**: The visualization function renders the dungeon correctly, displaying rooms and corridors as expected.

12. **Graph Construction (MST)**:  
    Verifies that the Minimum Spanning Tree (MST) is correctly calculated using the `mst` function.

    **Report**: The MST algorithm works on the points generated from the rooms, and a valid graph is produced without errors.

13. **Dungeon with Extra Corridors**:  
    Tests the scenario where the `extra_corridors` parameter is set to `True`, ensuring that additional corridors are added to the dungeon as expected.

    **Report**: Extra corridors are added, and the dungeon layout adjusts as per the configuration.

### Integration Testing

Integration testing was conducted to ensure that the various components of the system work together correctly. These tests focus on the interaction between the **Dungeon** class, **Room** placement, **Pathfinding (A*)**, **Graph Generation (MST)**, and **Dungeon Visualization**.

#### Integration Test Cases

1. **Dungeon Generation and Pathfinding Integration**:  
   Ensures that the dungeon map generation works with the A* pathfinding algorithm. After the dungeon is generated with rooms, A* is applied to find a valid path across the dungeon.

   **Report**: The dungeon is generated with rooms and corridors. The A* pathfinding algorithm works as expected, finding paths through the dungeon with no errors.

2. **Dungeon Visualization and Graph Integration**:  
   Tests the integration of the dungeon visualization with the MST graph generated from the rooms. The visualization should correctly reflect the dungeon layout, including room connections via the MST.

   **Report**: The dungeon is visualized correctly, with the rooms and corridors shown on the map, and the MST graph is correctly applied to connect rooms.

3. **Room Placement and Extra Corridors**:  
   Verifies that the extra corridors are placed correctly when the `extra_corridors` flag is set to `True`. This test ensures that the room placement logic integrates smoothly with the extra corridor addition logic.

   **Report**: Extra corridors are correctly placed in the dungeon, and the layout appears as expected.

4. **Complete Dungeon Generation Process**:  
   Tests the entire dungeon generation process from start to finish, including room placement, pathfinding, MST graph generation, and visualization. This end-to-end test ensures that all components work together as expected.

   **Report**: The dungeon is generated successfully, including room placement, pathfinding, and visualization, with all components working seamlessly together.

---

## End-to-End Testing

End-to-end testing was conducted to simulate the complete user experience from start to finish. This testing ensures that the entire system — from dungeon initialization to pathfinding and visualization — works correctly and integrates as expected.

### End-to-End Test Cases

   **Complete Dungeon Generation**:  
   Ensures that a complete dungeon is generated, including the placement of rooms, creation of corridors, and the generation of the MST. Pathfinding (A*) is then tested to ensure the system can find a path between rooms, and finally, the dungeon is visualized with the correct layout and paths.

   **Report**: The entire process works seamlessly, with rooms being placed, corridors created, the MST graph generated, and a path being found. The dungeon is visualized correctly with all components integrated successfully.



---

## User Interface Testing

UI testing for visualizations and user interactions is performed manually. The tests focus on the correct visual output of the dungeon map and the accurate representation of the generated rooms.

### UI Test Cases

1. **Visualization of Generated Dungeon**:  
   User runs the dungeon initialization, and the map is visualized correctly on the screen.

   **Report**: The dungeon map is generated and displayed visually with rooms and corridors, and the plot is shown correctly using `matplotlib`.

---

## Performance Testing

Given that the dungeon map and the room placement algorithm rely on simple grid-based logic, performance issues are unlikely for typical use cases. The complexity of the algorithm is expected to scale linearly with the number of rooms, which is manageable in most scenarios.

---

## Conclusion

The dungeon generation system has passed all unit, integration, and end-to-end tests, with **100% test coverage** achieved. The system is robust, with all key functionality thoroughly tested, including edge cases, room placement, pathfinding, MST graph generation, dungeon visualization, and the overall user experience. All components have been successfully integrated and tested, ensuring they work together as expected.

The dungeon generation and pathfinding system is reliable and works as intended under various configurations and inputs. Additionally, manual testing of the UI confirms the correct visual output of the dungeon map.
